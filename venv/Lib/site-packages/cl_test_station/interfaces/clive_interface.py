from cl_test_station.interfaces.ctrl_interface import CtrlInterface

class CliveInterface(CtrlInterface):

    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)

    def configure(self, config, *args, **kwargs):
        super().configure(config, *args, **kwargs)

    def write_reg(self, target, addr, data, ainc=None):
        """
        Performs a write register function in CLIVE

        :param addr: [long] address to write to
        :param data: [int] data word to write
        """
        # TODO: Set the controler interface in CLIVE here always
        self.container.write_reg(self.component_configs[target].CLIVE_name, addr, data)

    def read_reg(self, target, addr, word_count=1, ainc=None):
        """
        Performs a read register function in CLIVE

        :param addr: [long] address to write to
        :param word_count: [int] Length of read, VALUE GREATER THAN 1 NOT SUPPORTED
        :return: [list] list of word values shifted out of miso
        """
        # TODO: Set the controler interface in CLIVE here always
        if(word_count > 1):
            raise Exception("Word counts greater than 1 currently not supported in CLIVE controller")
        return self.container.read_reg(self.component_configs[target].CLIVE_name, addr)


if __name__ == "__main__":
    pass
