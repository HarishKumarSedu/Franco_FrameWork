"""
Variable list Module
Author: Evan Canter <evan.canter@cirrus.com>
"""
class VariList(list):
    """**Custom List that can have an arbitraty start index, while still mainatining most of python's list
    functionality.**"""
    __slots__ = ['start_index']
    def __init__(self, init_list=[], start_index=0):
        super().__init__(init_list)
        self.start_index = start_index

    def __normalize(self, index):
        if type(index) is slice:
            return slice(self.__normalize(index.start), self.__normalize(index.stop), index.step)
        elif type(index) is int:
            if index >= 0 and index < self.start_index:
                raise IndexError("list index out of range")
            if index < 0:
                return index
            return index - self.start_index
        else:
            return index

    def __getslice__(self, start, stop):
        return super().__getslice__(self.__normalize(start), self.__normalize(stop))

    def __setslice__(self, start, stop, value):
        super().__setslice__(self.__normalize(start), self.__normalize(stop), value)

    def __getitem__(self, i):
        return super().__getitem__(self.__normalize(i))

    def __setitem__(self, i, value):
        super().__setitem__(self.__normalize(i), value)

    def __delitem__(self, i):
        super().__delitem__(self.__normalize(i))

    def __iter__(self):
        for inx in range(self.start_index, len(self) + self.start_index):
            yield self.__getitem__(inx)

    def index(self, value):
        return super().index(value) + self.start_index

    def pop(self, i=None):
        if i is None:
            i = self.start_index + len(self) - 1
        return super().pop(self.__normalize(i))

    def enumerate(self):
        for inx in range(self.start_index, len(self) + self.start_index):
            yield inx, self.__getitem__(inx)

def enumerate(iterable, start=0):
    if isinstance(iterable, VariList):
        start = iterable.start_index
    for item in iterable:
        yield start, item
        start += 1


if __name__ == '__main__':
    l = VariList([1, 2, 3, 4, 5, 6, 7, 8, 9, 10], start_index=3)
    print(l)
    print(l[3])
    print(l[12])
    print(l[6:10])
    for i, n in l.enumerate():
        print(i, n)
    print(l[2])
