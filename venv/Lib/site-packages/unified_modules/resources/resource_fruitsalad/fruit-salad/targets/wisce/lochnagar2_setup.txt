*-------------------------------------------------------------------------------
* Lochnagar 2.0 Setup Script
*
* Board Firmware Version 00.01.03
*-------------------------------------------------------------------------------
*** Setup XMOS to CDC_AIF1

*** PMIC 32K to MCLK2
*** CDC_MCLK2_CTRL(1FH):     8003  CDC_MCLK2_ENA=1, CDC_MCLK2_SRC=0000_0011
0x1F 0x8003 SMbus_16inx_16dat     Write  0x44

*** MCLK1 = XMOS_MCLK (will switch from 24.576MHz to 22.579MHz depending on USB
***    sample rate (ie 48k or 44.1k)
*** CDC_MCLK1_CTRL(1EH):     800A  CDC_MCLK1_ENA=1, CDC_MCLK1_SRC=0000_1010
0x1E 0x800A SMbus_16inx_16dat     Write  0x44

*** CDC_AIF1 to XMOS RX
*** XMOS_AIF1A_CTRL(19H):    8004  XMOS_AIF1A_ENA=1, XMOS_AIF1A_HS_ENA=0,
*** XMOS_AIF1A_SRC=0000_0100
0x19 0x8004 SMbus_16inx_16dat     Write  0x44

*** XMOS_TX to CDC_AIF1_RX
*** CDC_AIF1_CTRL(0DH):      E00D  CDC_AIF1_ENA=1, CDC_AIF1LRCLK_DIR=1,
***    CDC_AIF1BCLK_DIR=1, CDC_AIF1_HS_ENA=0, CDC_AIF1_SRC=0000_1101
0x0D 0xE00D SMbus_16inx_16dat     Write  0x44

*-------------------------------------------------------------------------------

*** Clear the Audio path relay setup
0xE5 0x0000 SMbus_16inx_16dat     Write  0x44
*** Set P4_OUT_SEL=P3_OUT_SEL=1 (OUT4 and OUT1)
0xE5 0x0030 SMbus_16inx_16dat     Write  0x44

*** Trigger an Update of the Analogue paths by toggling UBLAZE_CONFIG_UPDATE 0-1
0xE3 0x4000 SMbus_16inx_16dat     Write  0x44      * ANALOGUE_PATH_CTRL1(E3H)
0xE3 0xC000 SMbus_16inx_16dat     Write  0x44      * ANALOGUE_PATH_CTRL1(E3H)

*** Enable ADC's and DAC's ***
*** SOUNDCARD_1(FCH):        0017  SND_ADC_MCLK=1, SND_DAC_OUT_ENA=1,
***                                SND_DAC_MUTE_N=1, SND_DAC_MCLK=1
0xFC 0x0017 SMbus_16inx_16dat     Write  0x44

*-------------------------------------------------------------------------------
