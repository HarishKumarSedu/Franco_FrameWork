# @title Fruit Salad Project Usage
<!--============================================================================
==
== Copyright (c) 2015 Cirrus Logic International (UK) Ltd.  All rights reserved.
==
== This software as well as any related documentation is furnished under 
== license and may only be used or copied in accordance with the terms of the 
== license. The information in this file is furnished for informational use 
== only, is subject to change without notice, and should not be construed as 
== a commitment by Cirrus Logic International (UK) Ltd.  Cirrus Logic International
== (UK) Ltd assumes no responsibility or liability for any errors or inaccuracies
== that may appear in this document or any software that may be provided in
== association with this document. 
==
== Except as permitted by such license, no part of this document may be 
== reproduced, stored in a retrieval system, or transmitted in any form or by 
== any means without the express written consent of Cirrus Logic International
== (UK) Ltd or affiliated companies. 
==
== @file    ProjectUsage.md
== @brief   Markdown documentation file for using FruitSalad as part of a project.
==
== @version \$Id: FruitSaladGuide.md 865 2015-02-10 10:46:28Z aangus $
==
== @warning
==   This software is specifically written for Cirrus Logic devices.
==   It may not be used with other devices.
==
=============================================================================-->

Fruit Salad Project Usage
=============================

Introduction
------------

Fruit Salad is intended to be used, developed and extended by projects as
required to suit their testing needs. Testers are encouraged to write their
own feature files, step definitions and support methods and contribute these
back to the core Fruit Salad project.

This document assumes that the Fruit Salad testing framework has been 
installed on the testing machine to a known location referred to in this 
document as <FRUITSALAD_HOME> (i.e. the directory in which the main fruitalad.rb script 
can be found). There can be multiple copies of Fruit Salad installed on a given machine, 
but typically only a single version will be used during testing.

Note that where binary and library locations have been added to generic system 
paths, these may override attempts to use a specific version if it does not have 
preference on the search path.

Example Directory Setup
------------

For ease of use within a project developers should create a fruitsalad directory
from which it is safe to invoke fruitsalad and other testing software. This 
directory provides a location for temporary files and can contain any config, 
resources, along with project specific feature files and step definitions required 
for project testing.

For ease of use there should be a fruitsalad directory from which it is safe to
call fruitsalad (any temporary files will be placed here if needed). Under this directory should be
any project specifics relating to Fruit Salad such as configs and features directories 
along with any resource or usecases that may be needed for your particular tests.

```
  <Project_dir>/
    + fruitsalad/
      + configs/
      + features/
        + step_definitions
      + resources
      + src
        + extensions
```

This structure mirrors what is used in the <FRUITSALAD_HOME> directory and takes precedence over files named therein.
The fruit salad backend will ensure that the common step library and any custom steps defined within the features 
directory are pre-loaded for use during project testing.

### Folder Descriptions ###

   `configs` &mdash; YAML configuration files
   
   `features` &mdash; Collection of feature files written in Gherkin syntax
   
   `step_definitions` &mdash; Underlying ruby code that recognises and implements  Gherkin steps 
   
  `resources` &mdash;  Resource files for testing (e.g. audio files)
  
  `src` &mdash; Additional source for implementing Fruit Salad functionality.
  
  `extensions` &mdash; Source folder for native code extension implementations.
  


Ant and Jenkins Continuous Integration
------------------

It is possible to include a top-level build XML file for use with Ant that can 
simplify execution of fruitsalad tests with or without Continuous Integration 
environment (Jenkins). 

See the [Conflence pages](http://docs.cirrus.com/display/CT/Integrating+Fruit+Salad+with+Jenkins) for further details.


Running Fruit Salad for Project Use
------------------

Fruit Salad picks up most of its location information from the current working 
directory and the folder in which the fruitsalad.rb script is located. When being
run as part of a project, Fruit Salad should be run from within the fruitsalad 
directory. To locate the installed version there are two approaches:

1. Provide a path to the fruitsalad.rb script when invoking fruitsalad.
2. Set the RUBYPATH environment variable and call fruitsalad with the ruby -S option (searches the RUBYPATH for fruitsalad.rb)

With RUBYPATH including FRUITSALAD_HOME the following two commands are equivalent:

```
   >ruby <FRUITSALAD_HOME>\fruitsalad.rb <options>
```
or 
```
   >ruby -S fruitsalad.rb <options>
```

Executing fruitsalad in this way will pick up the step definitions from the main
step library along with any definitions included within the project features 
directory. Only features from within the project directory will be run by 
default (unless paths are given to features/directories outside the project).
It is not recommended that features be pulled in from the installed examples
directory, instead these should be copied to and modified from the project features
folder to avoid picking up any undesired changes or executing additional features 
unsupported by your project or intended target(s).
