<?xml version="1.0" encoding="utf-8"?>
<!--
================================================================================
==
== Copyright (c) 2014 Cirrus Logic International (UK) Ltd.  All rights reserved.
==
== This software as well as any related documentation is furnished under 
== license and may only be used or copied in accordance with the terms of the 
== license. The information in this file is furnished for informational use 
== only, is subject to change without notice, and should not be construed as 
== a commitment by Cirrus Logic International (UK) Ltd.  Cirrus Logic International
== (UK) Ltd assumes no responsibility or liability for any errors or inaccuracies
== that may appear in this document or any software that may be provided in
== association with this document. 
==
== Except as permitted by such license, no part of this document may be 
== reproduced, stored in a retrieval system, or transmitted in any form or by 
== any means without the express written consent of Cirrus Logic International
== (UK) Ltd or affiliated companies. 
==
== @file    build.xml
== @brief   fft build file
==
== This file is the Ant build file for the fft dll for the FruitSalad project.  
== 
== To build, cd to this directory in a DOS prompt and type:
==    ant
==
== This will build the project.
==
== To see a list of all the available targets, along with short descriptions
== of each one, type:
==    ant -p
==
== @version \$Id: build.xml 588 2014-12-08 13:41:12Z piotrs $
==
== @warning
==   This software is specifically written for Cirrus Logic devices.
==   It may not be used with other devices.
==
================================================================================
-->
<project name="fft" default="all">
    <!-- We need to define the root of the build tree.  This is where the Visual
         Studio solution file can be found.
      -->
    <property name="root.dir" location="${basedir}"/>
    <property name="FruitSaladRoot.dir" location="${basedir}/../../.."/>    
    <property name="distribution.root" location="${root.dir}/../../distribution"/>

    <!-- This is where to find the standard build files -->
    <property name="common.dir" location="${FruitSaladRoot.dir}/depends"/>

    <!-- Our solution file name -->
    <property name="Solution" value="fft"/>
        
    <property name="VersionFile" value="${FruitSaladRoot.dir}/FruitSaladVersion.xml" />

    <!-- Import the standard build rules -->
    <import file="${common.dir}/build/WMBuild.xml"/>    

    <!--====================================================================
      == Initialisation extras
      == See WMBuild.init to see all the properties which can be overridden.
      -->
    <target name="preinit" depends="WMBuild.preinit">
        <property name="Configurations" value="Release Win32"/>

        <property name="doc.dir" location="${root.dir}\Docs"/>
        <property name="bin.root" location="${root.dir}\bin"/>
        <property name="DLL.root" location="${root.dir}\DLLs"/>
        <property name="lib.root" location="${root.dir}\lib"/>
	
        <property name="buildConfig" value="Release"/>
        <property name="platform" value="Win32"/>

        <!-- Don't run tests from bin or output\bin -->
        <property name="testexcludes" value="**\bin\**\*.exe"/>		
    </target>
        
    <!-- build and copy dll into the lib directory -->
    <target name="build" depends="WMBuild.build">
        <copy file="${root.dir}/Release/x86/fft_x86.dll" todir="${FruitSaladRoot.dir}/lib/" />	
    </target>
    
    <target name="clean" depends="">
        <delete includeemptydirs="true" failonerror="false">
            <fileset file="${FruitSaladRoot.dir}/lib/FFT.dll" />
            <fileset file="${FruitSaladRoot.dir}/lib/FFT64.dll" />
            <fileset file="${FruitSaladRoot.dir}/lib/fft_x86.dll" />
            <fileset file="${root.dir}/fft.sdf" />
            <fileset dir="${root.dir}/Release" />
        </delete>
    </target>

</project>
