///////////////////////////////////////////////////////////////////////////////
//
// Copyright (c) 2013-2015 Cirrus Logic International (UK) Ltd. All rights reserved.
//
// This software as well as any related documentation is furnished under
// license and may only be used or copied in accordance with the terms of the
// license. The information in this file is furnished for informational use
// only, is subject to change without notice, and should not be construed as
// a commitment by Cirrus Logic International (UK) Ltd. Cirrus Logic International
// (UK) Ltd assumes no responsibility or liability for any errors or inaccuracies
// that may appear in this document or any software that may be provided in
// association with this document.
//
// Except as permitted by such license, no part of this document may be
// reproduced, stored in a retrieval system, or transmitted in any form or by
// any means without the express written consent of Cirrus Logic International
// (UK) Ltd or affiliated companies.
//
// @file   unshorten.h
// @brief  Defines unshorten structure and prototypes for the functions defined
//         for unshorten process.
// @warning
//   This software is specifically written for Cirrus Logic devices.
//   It may not be used with other devices.
//
///////////////////////////////////////////////////////////////////////////////

#ifndef UNSHORTEN_H
#define UNSHORTEN_H

#include "unshorten_defs.h"

struct unshorten {
    u8 *output_buf;
    const u8 *input_data;
    int input_data_size;
    int input_index;
    u8 *block_buf;
    int curr_block_size;
    int block_buf_index;
#ifdef INCLUDE_PASSTHRU_DATA
    Sample *passthru_buf;
#endif
};

#define UNSHORTEN_INPUT_REQUIRED    0x80000000
#define UNSHORTEN_OUTPUT_AVAILABLE  0x40000000
#define UNSHORTEN_CORRUPT           0x20000000
#define UNSHORTEN_OUTPUT_SIZE(x)    ((x)&0xffff)

extern int init_unshorten(struct unshorten *u);
extern void free_unshorten(struct unshorten *u);
extern int unshorten_process(struct unshorten *u);
extern int unshorten_supply_input(struct unshorten *u, const void *data,u32 size);
extern const Sample *unshorten_extract_output(struct unshorten *u);

#ifdef INCLUDE_PASSTHRU_DATA
extern const Sample *unshorten_extract_passthru(struct unshorten *u);
#endif

#endif

