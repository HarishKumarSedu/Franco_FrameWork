###############################################################################
###
### Copyright (c) 2015 Cirrus Logic International (UK) Ltd.  All rights reserved.
###
### This software as well as any related documentation is furnished under 
### license and may only be used or copied in accordance with the terms of the 
### license. The information in this file is furnished for informational use 
### only, is subject to change without notice, and should not be construed as 
### a commitment by Cirrus Logic International (UK) Ltd.  Cirrus Logic International
### (UK) Ltd assumes no responsibility or liability for any errors or inaccuracies
### that may appear in this document or any software that may be provided in
### association with this document. 
###
### Except as permitted by such license, no part of this document may be 
### reproduced, stored in a retrieval system, or transmitted in any form or by 
### any means without the express written consent of Cirrus Logic International
### (UK) Ltd or affiliated companies. 
###
### @file jack_control.feature
### @brief Acceptance test that we can configure audio jack endpoints in a feature.
###
### @version \$Id: jack_control.feature 828 2015-02-03 10:30:04Z emmas $
###
### @warning
###    This software is specifically written for Cirrus Logic devices.
###    It may not be used with other devices.
###
###############################################################################
@windows
Feature: Configure Endpoints as part of a feature
    We should be able to add and remove the headset jack as part of a feature.

    ###########################################################################
    # 
    # Capture the output as part of all of these tests.
    #
    ###########################################################################
    Background:
        Given I am recording the output

    ###########################################################################
    #
    # Begin playback and record from a headset.
    #
    ###########################################################################
    Scenario: Playback to a headset when present
        Given there is a 4-pole jack inserted
        When I play 3 seconds of white noise
        Then the output was not silence

    ###########################################################################
    #
    # Return playback to the speakers after playing to the headset.
    #
    ###########################################################################
    Scenario: Playback to the speakers when a headset is not present
        Given there is no jack inserted
        When I play 3 seconds of white noise
        Then the output was not silence

    ###########################################################################
    #
    # Return the playback back to the headset again, to make sure that works.
    #
    ###########################################################################
    Scenario: Return playback to the headset after speaker playback
        Given there is no jack inserted
        When there is a 4-pole jack inserted
        And I play 3 seconds of white noise
        Then the output was not silence

#################################### END OF FILE ##############################
    

