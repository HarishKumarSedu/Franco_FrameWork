################################################################################
##
## Copyright (c) 2014-2015 Cirrus Logic International (UK) Ltd.  All rights reserved.
##
## This software as well as any related documentation is furnished under 
## license and may only be used or copied in accordance with the terms of the 
## license. The information in this file is furnished for informational use 
## only, is subject to change without notice, and should not be construed as 
## a commitment by Cirrus Logic International (UK) Ltd.  Cirrus Logic International
## (UK) Ltd assumes no responsibility or liability for any errors or inaccuracies
## that may appear in this document or any software that may be provided in
## association with this document. 
##
## Except as permitted by such license, no part of this document may be 
## reproduced, stored in a retrieval system, or transmitted in any form or by 
## any means without the express written consent of Cirrus Logic International
## (UK) Ltd or affiliated companies.  
##
### @file element_lookup.feature
### @brief Lookup elements (fields, registers) from a device.
###
### @version \$Id: element_lookup.feature 661 2015-01-06 18:01:36Z aangus $
###
### @warning
###   This software is specifically written for Cirrus Logic devices.
###   It may not be used with other devices.
###
#################################################################################
#
# We should be able to read element (registers, fields) values from a device.
#
###############################################################################
@firmware
Feature: We should be able to read and check field or register values from a device.

    ###########################################################################
    #
    # Background
    #
    # First ensure that a device is connected.
    #
    # Primarily tested with a WM8280
    #
    # TODO: Given that this feture is checking for specific element names it might
    #       be useful to allow for connections to specific devices?
    #
    ###########################################################################
    Background:
        Given I am connected to a device

    ###########################################################################
    #
    # Check the default values of fields and registers are as expected.
    #
    ###########################################################################
    @hw_setup_tests
    Scenario: We can read and check default element values.
        Then register "DRC2_ctrl1" equals 0018H
        And register "DRC2_ctrl1" equals its default
        And field "DRC2L_ENA" equals 0H
        And field "DRC2L_ENA" equals its default

    ###########################################################################
    #
    # Write to a register and read back the value.
    #
    ###########################################################################
    @hw_setup_tests
    Scenario: We can write and read back element values
        Given register "DRC2_ctrl1" is written C042H
        Then register "DRC2_ctrl1" equals C042H
        And field "DRC2L_ENA" equals 1H

    ###########################################################################
    #
    # Load usecase and check elements have updated their values.
    #
    ###########################################################################
    Scenario: We can read and check element values loaded from a usecase.
        Given I load use case "drc_settings"
        Then register "DRC2_ctrl1" equals C042H
        And field "DRC2L_ENA" equals 1H



################################## END OF FILE ##################################