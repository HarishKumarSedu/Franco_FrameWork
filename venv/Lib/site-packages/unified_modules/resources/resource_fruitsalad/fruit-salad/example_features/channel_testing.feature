###############################################################################
###
### Copyright (c) 2014-2015 Cirrus Logic International (UK) Ltd.  All rights reserved.
###
### This software as well as any related documentation is furnished under 
### license and may only be used or copied in accordance with the terms of the 
### license. The information in this file is furnished for informational use 
### only, is subject to change without notice, and should not be construed as 
### a commitment by Cirrus Logic International (UK) Ltd.  Cirrus Logic International
### (UK) Ltd assumes no responsibility or liability for any errors or inaccuracies
### that may appear in this document or any software that may be provided in
### association with this document. 
###
### Except as permitted by such license, no part of this document may be 
### reproduced, stored in a retrieval system, or transmitted in any form or by 
### any means without the express written consent of Cirrus Logic International
### (UK) Ltd or affiliated companies. 
###
### @file channel_testing.feature
### @brief Test each channel independently of one another.
###
### @version \$Id: channel_testing.feature 942 2015-03-13 16:03:51Z aangus $
###
### @warning
###    This software is specifically written for Cirrus Logic devices.
###    It may not be used with other devices.
###
###############################################################################
#
# Test each channel independently of each other by disabling every channel and
# re-enabling only one at a time.
#
#################################################################################
@windows
Feature: Per-channel playback test.

###############################################################################
#
# Check that the output can be silenced when muting both playback channels (part of DE1298).
#
###############################################################################
    Scenario: We can explicitly mute both playback channels
        Given I am recording the output
        And playback left channel volume is 0
        And playback right channel volume is 0
        When I play a 1.5 kHz sine wave for 2 seconds
        Then the output was silence

###############################################################################
#
# Disable all playbackchannels except the left channel, and perform a simple 
# playback test.
#
###############################################################################
    Scenario: Left playback channel should operate independently.
        Given I am recording the output
        And I playback to the left channel only
        When I play a 1 kHz sine wave for 2 seconds
        Then the output was not silence
        And the output has frequency spectrum with peak at 1 kHz, error 0.5 Hz

###############################################################################
#
# Disable all playback channels except the right channel and perform a simple
# playback test.
#
###############################################################################
    Scenario: Right playback channel should operate independently.
        Given I am recording the output
        And I playback to the right channel only
        When I play a 1 kHz sine wave for 2 seconds
        Then the output was not silence
        And the output has frequency spectrum with peak at 1 kHz, error 0.5 Hz

###############################################################################
#
# Disable all microphone channels except the left microphone channel and perform
# a simple playback test.
#
###############################################################################
    Scenario: Right recording channel should operate independently.
        Given I am recording the output
        And I record from the left channel only
        When I play a 1 kHz sine wave for 2 seconds
        Then the output was not silence
        And the output has frequency spectrum with peak at 1 kHz, error 0.5 Hz

###############################################################################
#
# Attenuate the volume on one playback channel and perform a simple playback test.
#
###############################################################################
    Scenario: Explicitly set the volume on one playback channel to 1/5th
        Given I am recording the output
        And playback left channel volume is 0.2
        When I play a 1 kHz sine wave for 2 seconds
        Then the output was not silence

###############################################################################
#
# Explicitly mute one playback channel and perform a simple playback test.
#
###############################################################################
    Scenario: Explicitly mute one playback channel
        Given I am recording the output
        And playback right channel volume is 0
        When I play a 1 kHz sine wave for 2 seconds
        Then the output was not silence

###############################################################################
#
# Reduce the volume on one recording channel and perform a simple playback test.
#
###############################################################################
    Scenario: Explicitly set the volume on one recording channel to 1/2th
        Given I am recording the output
        And capture left channel volume is 0.5
        When I play a 1 kHz sine wave for 2 seconds
        Then the output was not silence

#################################### END OF FILE ##############################