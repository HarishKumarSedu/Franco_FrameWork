################################################################################
##
## Copyright (c) 2015 Cirrus Logic International (UK) Ltd.  All rights reserved.
##
## This software as well as any related documentation is furnished under 
## license and may only be used or copied in accordance with the terms of the 
## license. The information in this file is furnished for informational use 
## only, is subject to change without notice, and should not be construed as 
## a commitment by Cirrus Logic International (UK) Ltd.  Cirrus Logic International
## (UK) Ltd assumes no responsibility or liability for any errors or inaccuracies
## that may appear in this document or any software that may be provided in
## association with this document. 
##
## Except as permitted by such license, no part of this document may be 
## reproduced, stored in a retrieval system, or transmitted in any form or by 
## any means without the express written consent of Cirrus Logic International
## (UK) Ltd or affiliated companies.  
##
### @file  device_pack_creation.feature
### @brief Scenarios for creating device pack installers.
###
### @version \$Id: device_pack_creation.feature 859 2015-02-09 18:09:04Z aangus $
###
### @warning
###   This software is specifically written for Cirrus Logic devices.
###   It may not be used with other devices.
###
#################################################################################
@build_tests
Feature: Device pack installers are created correctly.
    
    ###########################################################################
    #
    # Device packs are created from a staging area that contains the packaged files in a set directory structure.
    #
    ###########################################################################
    Background:
        Given the pack Devices directory is clean
    
    ###########################################################################
    #
    # Create a simple single device pack
    #
    ###########################################################################
    Scenario: Create a pack for a single WM named device.
        Given Device WM1111 RevE is available for packaging
        When I create the device pack WM1111 version 2.1
        Then a device pack installer has been created    
    
    ###########################################################################
    #
    # Create a simple single device pack - with additional older version.
    #
    ###########################################################################
    Scenario: Create a pack for a single WM named device with an additional old revision.
        Given Device WM1111 RevE is available for packaging
        Given Device WM1111 RevA is available for packaging
        When I create the device pack WM1111 version 2.2
        Then a device pack installer has been created
        
    ###########################################################################
    #
    # Create a simple single device pack - with newer device.
    #
    ###########################################################################
    Scenario: Create a pack for a single WM named device with newer device.
        Given Device WM1111 RevE is available for packaging
        Given Device WM1111 RevA is available for packaging
        Given Device WM1111 RevF is available for packaging
        When I create the device pack WM1111 version 2.3
        Then a device pack installer has been created

    ###########################################################################
    #
    # Create three Firmware named single device packs: single, old and new devices
    #
    ###########################################################################
    Scenario: Create three Firmware named device packs with single, old and new devices.
        Given Device WM1111 RevE is available for packaging
        When I create the device pack SingleDevice version 2.1
        Then a device pack installer has been created
        Given Device WM1111 RevA is available for packaging
        When I create the device pack SingleDevice version 2.2
        Then a device pack installer has been created
        Given Device WM1111 RevF is available for packaging
        When I create the device pack SingleDevice version 2.3
        Then a device pack installer has been created

    ###########################################################################
    #
    # Attempting to create a device pack with self-replacement should not work.
    #
    ###########################################################################
    Scenario: Create a self-replacing pack for a single WM named device.
        Given Device WM1111 RevF is available for packaging
        When I create the device pack WM1111 version 9.9 replacing WM1111
        Then a device pack installer has not been created

    ###########################################################################
    #
    # Create a single device Cirrus named device pack
    #
    ###########################################################################
    Scenario: Create a single device Cirrus named device pack
        Given Device CS47L85 RevB is available for packaging
        When I create the device pack CS47L85 version 2.1
        Then a device pack installer has been created

    ###########################################################################
    #
    # Create a CS pack that replaces a WM named device pack
    #
    ###########################################################################
    Scenario: Create a CS pack that replaces a WM named device pack.
        Given Device CS47L85 RevB is available for packaging
        When I create the device pack CS47L85 version 9.9 replacing WM1111
        Then a device pack installer has been created

    ###########################################################################
    #
    # Create a single device CS pack (without Cirrus letter)
    #
    ###########################################################################
    Scenario: Create a CS pack that is named without a Cirrus letter
        Given Device CS1111 RevE is available for packaging
        When I create the device pack CS1111 version 1.2
        Then a device pack installer has been created

    ###########################################################################
    #
    # Create a CS pack that replaces a similarly named CS device
    #
    ###########################################################################
    Scenario: Create a CS pack that replaces a similarly named CS device
        Given Device CS47L85 RevB is available for packaging
        When I create the device pack CS47L85 version 8.8 replacing CS1111
        Then a device pack installer has been created

################################## END OF FILE ##################################