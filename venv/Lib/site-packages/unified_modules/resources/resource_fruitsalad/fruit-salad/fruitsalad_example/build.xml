<?xml version="1.0" encoding="utf-8"?>
<!--
================================================================================
==
== Copyright (c) 2014 Wolfson Microelectronics plc.  All rights reserved.
==
== This software as well as any related documentation is furnished under
== license and may only be used or copied in accordance with the terms of the
== license. The information in this file is furnished for informational use
== only, is subject to change without notice, and should not be construed as
== a commitment by Wolfson Microelectronics plc. Wolfson Microelectronics plc
== assumes no responsibility or liability for any errors or inaccuracies that
== may appear in this document or any software that may be provided in
== association with this document.
==
== Except as permitted by such license, no part of this document may be
== reproduced, stored in a retrieval system, or transmitted in any form or by
== any means without the express written consent of Wolfson Microelectronics plc.
==
== @file    build.xml
== @brief   Example build file for Jenkins integration.
==
== This file is the Ant build file example for running Fruit Salad as part of a project.  
== 
== To build, cd to this directory in a DOS prompt and type:
==    ant
==
== This will build the project.
==
== To see a list of all the available targets, along with short descriptions
== of each one, type:
==    ant -p
==
== @version \$Id: build.xml 479 2014-11-20 15:22:33Z aangus $
==
================================================================================
-->
<project name="FruitSaladExample" default="all">
    <!-- The location of the Fruit Salad files for this project: 
         features, configs, usecases etc. 
         Any output files and folfers will be placed here. -->
    <property name="fruitsalad_project.dir" location="${basedir}/fruitsalad"/>    
    
    <!-- The location of the Fruit Salad install directory (containing fruitsalad.rb) -->
    <property name="fruitsalad_home.dir" location="D:/FruitSalad/1.0.9.0/"/>    

    <!-- Testing target - this example uses null -->
    <property name="fruitsalad.target" value="null"/>        

    <!-- Print out the location of the Fruit Salad home directory -->
    <target name="debug">
        <echo> fruitsalad_home.dir:    ${fruitsalad_home.dir} </echo>
        <echo> fruitsalad_project.dir: ${fruitsalad_project.dir} </echo>
        <echo> fruitsalad.target:      ${fruitsalad.target} </echo>
    </target>
    
    <!-- sets up and runs fruitsalad from a project directory. -->    
    <target name="fruitsalad" depends="debug" description="Run FruitSalad for Jenkins." >                
        <!-- run fruitsalad in the run directory -->
        <exec executable="cmd" dir="${fruitsalad_project.dir}" failonerror="true">
            <arg value="/c"/>
            <arg value="ruby"/>
            <arg value="${fruitsalad_home.dir}/fruitsalad.rb"/>
            <arg value="${fruitsalad.target}"/>
            <arg value="-f"/>
            <arg value="features"/>            
            <arg value="--jenkins"/>
        </exec>        
    </target>
</project>
